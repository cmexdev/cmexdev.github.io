<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forecast - Weather system</title>
</head>
<body>
    <h1>Testing some things...</h1>
    <h3>Before you access <code>piccolowen.github.io/weather</code></h3>
    <hr>
    <p>Give us just a second...</p>
    <hr>
    <p><b>Geolocation</b>: <span id="loc-result">waiting...</span></p>
    <p><b>Mobile</b>: <span id="mobile">waiting...</span></p>
    <hr>
    <p id="overview">Waiting for overview...</p>
    <script>
        /*! modernizr 3.6.0 (Custom Build) | MIT *
     * https://modernizr.com/download/?-geolocation !*/
            !function (n, e, o) { function t(n, e) { return typeof n === e } function s() { var n, e, o, s, a, r, l; for (var u in i) if (i.hasOwnProperty(u)) { if (n = [], e = i[u], e.name && (n.push(e.name.toLowerCase()), e.options && e.options.aliases && e.options.aliases.length)) for (o = 0; o < e.options.aliases.length; o++)n.push(e.options.aliases[o].toLowerCase()); for (s = t(e.fn, "function") ? e.fn() : e.fn, a = 0; a < n.length; a++)r = n[a], l = r.split("."), 1 === l.length ? Modernizr[l[0]] = s : (!Modernizr[l[0]] || Modernizr[l[0]] instanceof Boolean || (Modernizr[l[0]] = new Boolean(Modernizr[l[0]])), Modernizr[l[0]][l[1]] = s), f.push((s ? "" : "no-") + l.join("-")) } } var i = [], a = { _version: "3.6.0", _config: { classPrefix: "", enableClasses: !0, enableJSClass: !0, usePrefixes: !0 }, _q: [], on: function (n, e) { var o = this; setTimeout(function () { e(o[n]) }, 0) }, addTest: function (n, e, o) { i.push({ name: n, fn: e, options: o }) }, addAsyncTest: function (n) { i.push({ name: null, fn: n }) } }, Modernizr = function () { }; Modernizr.prototype = a, Modernizr = new Modernizr, Modernizr.addTest("geolocation", "geolocation" in navigator); var f = []; s(), delete a.addTest, delete a.addAsyncTest; for (var r = 0; r < Modernizr._q.length; r++)Modernizr._q[r](); n.Modernizr = Modernizr }(window, document);
    </script>
    <script>
        var loc = document.getElementById('loc-result')
        var mob = document.getElementById('mobile')
        var ove = document.getElementById('overview')
        var url = ''
        var winLoc = window.location
        var winLoc2 = winLoc.toString()
        var winLoc3 = winLoc2.split('/', 5)
        var winLocFull = winLoc3.join('/')
        window.onload = function testLoc() {
            if (Modernizr.geolocation) {
                console.log('Geolocation supported...')
                return locTrue()
            }
            else if (!Modernizr.geolocation) {
                console.error('Geolocation not supported!')
                return locFalse()
            }
            else {
                console.error('An error occured (0x0)')
                return locUn()
            }
        }

        function locTrue() {
            loc.innerHTML = '&#9989'
            loc.title = 'Geolocation is supported!'
            if (window.innerHeight < 850) {
                if (window.innerWidth < 450) {
                    console.log('Mobile device')
                    mob.innerHTML = '&#9989'
                    mob.title = 'Mobile device detected'
                    url = winLocFull + '/m'
                }
            }
            else {
                console.log('Not mobile device')
                mob.innerHTML = '&#9940'
                mob.title = 'No mobile device detected'
                url = winLocFull + '/d'
            }
            ove.textContent = 'Done fetching all the info we need! Ready to continue to the weather system.'
            window.location = url
        }
        function locFalse() {
            loc.innerHTML = '&#9940'
            loc.title = 'Geolocation is not supported!'
            //Do something
            ove.textContent = 'Done fetching all the info we need! Note: no Geolocation means the system will not flow as well.'
            url = winLocFull + '/o'
        }
        function locUn() {
            loc.innerHTML = '&#10068'
            loc.title = 'Something went wrong'
            ove.textContent = 'Whoops! We encountered an error! Please try again later. (0x0)'
        }
    </script>
    <div id="bottom">
        <p>Piccolowen - Forecast - Weather system</p>
    </div>
    <style>
        html {
            padding: 5px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        html:hover {
            cursor: default;
        }
        #bottom {
            bottom: 0px;
            position: fixed;
            width: 100%;
            text-decoration: underline;
        }
    </style>
</body>
</html>