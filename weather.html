<!DOCTYPE html>
<html id="#html">
    <head>
        <!--META AND HEAD ELEMENTS-->
        <title>Forecast - Weather API system</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="UTF-8">
        <div id="icon"></div>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="weather.css">
        <script src="src/jquery-3.5.1.js"></script>
    </head>
    <body>
        <!--NO SCRIPT-->
        <noscript>
            <table id="top">
                <tr>
                    <th>This page relies on JavaScript to function. Please consider enabling JavaScript for this page.</th>
                </tr>
            </table>
        </noscript>

        <table id="error"></table>

        <!--MAIN PAGE TITLE-->
        <h1 id="forecast-title">The forecast</h1>
        <h5 id="forecast-loc"></h5>

        <!--TABLE OF CONTENTS-->
        <h3 id="tbltitle"></h3>
        <ul id="contents"></ul>

        <!--DISPLAYS THE MAIN FETCH URL WHEN DEVMODE IS ON-->
        <code id="mainurl"></code>

        <!--DISPLAYS IF THERE WAS AN ERROR IN GEOLOCATION-->
        <table id="geo-error-coords"></table>

        <!--CURRENT FORECAST-->
        <h2 id="current-forecast"></h2>
        <code id="current-forecast-devurl" class="dev"></code>
        <h5 id="currentdesc"></h5>
        <table id="current"></table>

        <!--ALERTS-->
        <h2 id="alerts">Alerts</h2>
        <code id="alert-devurl"></code>
        <h5>Get alerts for any state</h5>
        <p>Enter state</p>
        <input id="statein" type="text" placeholder="ex: OH"> <button onclick="getActiveAlerts()">Go</button>
        <hr />
        <table id="alert"></table>

        <!--HOURLY FORECAST-->
        <h2 id="hourly"></h2>
        <code id="hourly-devurl"></code>
        <h5 id="hourlydesc"></h5>
        <table id="forecast-hourly"></table>
        <a id="showall"></a>

        <!--DAILY FORECAST-->
        <h2 id="daily"></h2>
        <code id="daily-devurl"></code>
        <h5 id="dailydesc"></h5>
        <table id="forecast"></table>

        <!--MOST RECENT COMMIT: BETA-->
        <h2 id="lastcommit">Most recent commit</h2>
        <p id="betacommitfeature">This feature is in BETA. <a class="unstyled-a" href="#betacommitfeature" onclick="commitData()">Try it anyway</a>. Do not expect a result. Note: this gets the most recent commit of the main repository (piccolowen.github.io)</p>
        <table id="lastcommitdata"></table>
        <script>
            var commitsUrl = 'https://api.github.com/repos/Piccolowen/piccolowen.github.io/commits'
            var commitOut = document.getElementById('lastcommitdata')
            var commitResponse = ''
            var commitResult = ''
            var commits
            var currentCommitUrl
            var fileName = 'weather.html'
            async function commitData() {
                commitResponse = await fetch(commitsUrl)
                commitResult = await commitResponse.json()
                commits = Object.keys(commitResult).length
                console.log('RECENT COMMITS: ' + commits)
                var commitArrNum = 0

            }
        </script>

        <!--SEE ALSO-->
        <h2 id="seealso">See also</h2>
        <span id="footer"></span>
        <div>
            View source code on <a href="https://github.com/Piccolowen/piccolowen.github.io/blob/master/weather.html">GitHub</a>.
            Powered by <a href="https://api.weather.gov">api.weather.gov</a>
            <p>I was bored, so I created this. It is a simple HTML/JS API request system.</p>
            <p>Found an issue? Describe it in <a target="_blank" href="https://docs.google.com/forms/d/e/1FAIpQLSflIrKpFAwLO3RRQkgUfyrztWmUdnfWQlc-MCJw1j_NH6OLFA/viewform?usp=sf_link">this Google Form</a></p>
            <p>Visit the <a>error wiki</a>.</p>
        </div>
        <script>
            var foot = document.getElementById('footer')
            foot.textContent = 'Created by Piccolowen on 4/29/2020 and last updated on ' + document.lastModified + '. Styling by Bootstrap.'
        </script>

        <!--PAGE SETTINGS-->
        <h2 id="settings">Page settings</h2>
        <table id="settings-out"></table>
        <script>
            var defStateCookie2 = ''
            var enterState = document.createElement('label')
                var enterStateIn = document.createElement('input')
                enterStateIn.placeholder = 'ex: OH'
                enterStateIn.type = 'text'
                enterStateIn.id = 'state-in'
                enterState.textContent = 'Enter state'


                var br = document.createElement('br')

                var enterStateSet = document.createElement('button')
                enterStateSet.id = 'set-state'
                enterStateSet.textContent = 'Set as default alert state'
            var settingsOut = document.getElementById('settings-out')
            var state = document.createElement('input')
            state.type = 'checkbox'
            var stateCookie = document.cookie
            if (stateCookie.includes('rememberState=true') == true) {
                state.checked = true
            }
            else {
                state.checked = false
            }
            state.id = 'remember-state-check'
            settingsOut.appendChild(state)
            var stateLabel = document.createElement('label')
            stateLabel.textContent = 'Remember my alert state'
            settingsOut.appendChild(stateLabel)

            var defStateCookie = document.cookie
            if (defStateCookie.includes('defState')) {
                var defStateCookie1 = defStateCookie.split('defState=')
                defStateCookie2 = defStateCookie1[1].split(';', 1)
                enterStateIn.value = defStateCookie2[0]
            }

    if ($('#remember-state-check').prop('checked') == true) {
        enterStateIn.disabled = false
        enterStateIn.className = ''
        enterStateSet.disabled = false
        enterStateSet.className = ''
    }
    else {
        enterStateIn.disabled = true
        enterStateIn.className = 'input-disabled'
        enterStateSet.disabled = true
        enterStateSet.className = 'input-disabled'
    }
    settingsOut.appendChild(br)
    settingsOut.appendChild(enterState)
    settingsOut.appendChild(enterStateIn)
    settingsOut.appendChild(enterStateSet)

            $('#remember-state-check').change(function() {
                console.log($('#remember-state-check').prop('checked'))
                document.cookie = 'rememberState=' + $('#remember-state-check').prop('checked')
                
                if ($('#remember-state-check').prop('checked') == true) {
                    enterStateIn.disabled = false
                    enterStateIn.className = ''
                    enterStateSet.disabled = false
                    enterStateSet.className = ''
                }
                else {
                    enterStateIn.disabled = true
                    enterStateIn.className = 'input-disabled'
                    enterStateSet.disabled = true
                    enterStateSet.className = 'input-disabled'
                }
                settingsOut.appendChild(br)
                settingsOut.appendChild(enterState)
                settingsOut.appendChild(enterStateIn)
                settingsOut.appendChild(enterStateSet)
            })

            document.getElementById('set-state').onclick = function() {
                var defState = document.getElementById('state-in').value
                document.cookie = 'defState=' + defState
                console.log('set def state as ' + defState)
            }

            window.onload = function() {
                if (document.cookie.includes('rememberState=true')) {
                    return getActiveAlerts()
                }
            }
        </script>
        <a href="#" id="devmode" onclick="showDev()"></a>
        <script>
            function showDev() {
                var currentUrl = document.getElementById('current-forecast-devurl')
                currentUrl.textContent = 'FETCH URL: ' + urlHourlyForecast
                var hourlyUrlEl = document.getElementById('hourly-devurl')
                hourlyUrlEl.textContent = 'FETCH URL: ' + urlHourlyForecast
                var dailyUrlEl = document.getElementById('daily-devurl')
                dailyUrlEl.textContent = 'FETCH URL: ' + urlDailyForecast
                var mainUrl = document.getElementById('mainurl')
                mainUrl.textContent = 'MAIN FETCH URL: ' + urlDaily
            }
        </script>
        <hr>
        <a href="#">Go back to top</a>

        <!--MAIN SCRIPT-->
        <script>
            var status = ''
            var locLat = ''
            var locLon = ''
            var urlDaily = ''
            var urlDailyForecast = ''
            var urlHourlyForecast = ''
            var response
            var result
            var arrLen
            var arrNum
            var forecastDaily = document.getElementById('forecast')
            var forecastHourly = document.getElementById('forecast-hourly')
            var err = document.getElementById('error')
            var errMsg = ''
            var hoursUser= new Date()
            var hourUser = hoursUser.getHours()
            var dateUser = new Date()
            var dateUserDay = dateUser.getDate()
            var forecastLoc = ''
            console.log('CURRENT DAY OF USER: ' + dateUserDay)
            console.log('CURRENT HOUR OF USER: ' + hourUser)
            var hourOut
            var currentArrNum
            navigator.geolocation.getCurrentPosition(locSys, locError)
            var overloaderr = 'GitHub API requests are liable to be overloaded, so some systems may not function properly.'
            err.append(overloaderr)
            function locSys(position) {
                locLat = position.coords.latitude
                locLon = position.coords.longitude
                return getStatus()
            }
            async function getStatus() {
                var devmode = document.getElementById('devmode')
                devmode.textContent = 'Enable developer mode'

                var tbl = document.getElementById('tbltitle')
                tbl.textContent = 'Page content'

                var tblOfContents = document.getElementById('contents')
                var currentLink = document.createElement('li')
                var currentLinkA = document.createElement('a')
                currentLinkA.href = '#current-forecast'
                currentLinkA.textContent = 'Current stats'
                currentLink.appendChild(currentLinkA)
                tblOfContents.appendChild(currentLink)
                var alertLink = document.createElement('li')
                var alertLinkA = document.createElement('a')
                alertLinkA.href = '#alerts'
                alertLinkA.textContent = 'Alerts'
                alertLink.appendChild(alertLinkA)
                tblOfContents.appendChild(alertLink)
                var hourlyLink = document.createElement('li')
                var hourlyLinkA = document.createElement('a')
                hourlyLinkA.href = '#hourly'
                hourlyLinkA.textContent = 'Hourly forecast'
                hourlyLink.appendChild(hourlyLinkA)
                tblOfContents.appendChild(hourlyLink)
                var dailyLink = document.createElement('li')
                var dailylLinkA = document.createElement('a')
                dailylLinkA.href = '#daily'
                dailylLinkA.textContent = 'Daily forecast'
                dailyLink.appendChild(dailylLinkA)
                tblOfContents.appendChild(dailyLink)
                var credit = document.createElement('li')
                var creditA = document.createElement('a')
                creditA.href = '#seealso'
                creditA.textContent = 'See also'
                credit.appendChild(creditA)
                tblOfContents.appendChild(credit)
                var commit = document.createElement('li')
                var commitA = document.createElement('a')
                commitA.textContent = 'Most recent commit'
                commitA.href = '#lastcommit'
                var settings = document.createElement('li')
                var settingsA = document.createElement('a')
                settingsA.textContent = 'Page settings'
                settingsA.href = '#settings'
                settings.appendChild(settingsA)
                tblOfContents.appendChild(settings)

                var settingsOut = document.getElementById('settings-out')

                var devmodeCheck = document.createElement('input')
                devmodeCheck.type = 'checkbox'
                var devmodeLabel = document.createElement('label')
                devmodeLabel.textContent = 'Developer mode'
                settingsOut.appendChild(devmodeCheck)
                settingsOut.appendChild(devmodeLabel)

                var url = 'https://api.weather.gov'
                var response = await fetch(url)
                var result = await response.json()
                if (result.status == 'OK') {
                    console.log('API STATUS: ' + result.status)
                    return requestDaily()
                }
                else {
                    console.error(result.status)
                    var statusMsg = document.getElementById('error')
                    var msg = document.createElement('span')
                    msg.textContent = 'Weather API down. (Status: "' + result.status + '")'
                    statusMsg.append(msg)
                }
            }
            async function requestDaily() {
                urlDaily = 'https://api.weather.gov/points/' + locLat + ',' + locLon
                response = await fetch(urlDaily)
                result = await response.json()
                forecastLoc = result.properties.relativeLocation.properties.city + ', ' + result.properties.relativeLocation.properties.state
                var forecastLocation = document.getElementById('forecast-loc')
                forecastLocation.textContent = forecastLoc
                urlDailyForecast = result.properties.forecast
                return dailyData()
            }
            async function dailyData() {
                response = await fetch(urlDailyForecast)
                result = await response.json()
                arrLen = Object.keys(result.properties.periods).length
                arrNum = 0

                var dailyTitle = document.getElementById('daily')
                dailyTitle.textContent = 'Daily forecast'
                var dailyDesc = document.getElementById('dailydesc')
                dailyDesc.textContent = 'The daily forecast'
                while (arrNum < arrLen) {
                    var iconDaily = document.createElement('img')
                    iconDaily.src = result.properties.periods[arrNum].icon
                    iconDaily.className = 'icon'
                    forecastDaily.append(iconDaily)

                    var nameDaily = document.createElement('div')
                    nameDaily.textContent = result.properties.periods[arrNum].name
                    nameDaily.className = 'name'
                    forecastDaily.append(nameDaily)

                    var tempDaily = document.createElement('div')
                    tempDaily.textContent = result.properties.periods[arrNum].temperature
                    tempDaily.className = 'temp'
                    forecastDaily.append(tempDaily)

                    var windDaily = document.createElement('div')
                    windDaily.textContent = 'Wind will be around ' + result.properties.periods[arrNum].windSpeed + ' heading ' + result.properties.periods[arrNum].windDirection
                    windDaily.className = 'wind'
                    forecastDaily.append(windDaily)

                    var descDaily = document.createElement('div')
                    descDaily.textContent = result.properties.periods[arrNum].detailedForecast
                    descDaily.className = 'desc'
                    forecastDaily.append(descDaily)

                    arrNum++
                }
                return requestHourly()
            }
            async function requestHourly() {
                response = await fetch(urlDaily)
                result = await response.json()
                urlHourlyForecast = result.properties.forecastHourly
                return dataHourly()
            }
            async function dataHourly() {
                response = await fetch(urlHourlyForecast)
                result = await response.json()
                arrLen = Object.keys(result.properties.periods).length
                arrMax = 25
                arrNum = 0

                var hourlyTitle = document.getElementById('hourly')
                hourlyTitle.textContent = 'Hourly forecast'
                var hourlyDesc = document.getElementById('hourlydesc')
                hourlyDesc.textContent = 'The hourly forecast'
                while (arrNum < arrMax) {
                    var isDay = result.properties.periods[arrNum].isDaytime
                    var iconHourly = document.createElement('img')
                    iconHourly.src = result.properties.periods[arrNum].icon
                    iconHourly.className = 'icon'
                    forecastHourly.append(iconHourly)

                    var starttimeRaw = result.properties.periods[arrNum].startTime
                    var starttimeT = starttimeRaw.split('T')
                    var hourtime = starttimeT[1].split('-', 1)

                    var hour = hourtime[0].split(':', 1)
                    var hourTw = hour[0] - 12
                    if (hour[0] > 12) {
                        hourOut = hourTw + ' PM'
                    }
                    else if (hour[0] == 12) {
                        hourOut = '12 PM'
                    }
                    else if (hour[0] == 00) {
                        hourOut = '12 AM'
                    }
                    else if (hour[0] == 1) {
                        hourOut = hour[0] + ' AM'
                    }
                    else {
                        hourOut = hour[0] + ' AM'
                    }

                    var hourout = document.createElement('div')
                    hourout.textContent = hourOut
                    hourout.className = 'name'
                    forecastHourly.append(hourout)

                    var hourTemp = document.createElement('div')
                    hourTemp.textContent = result.properties.periods[arrNum].temperature
                    hourTemp.className = 'temp'
                    forecastHourly.append(hourTemp)

                    var windState = document.createElement('div')
                    windState.textContent = 'Wind will be around ' + result.properties.periods[arrNum].windSpeed + ' heading ' + result.properties.periods[arrNum].windDirection
                    windState.className = 'wind'
                    forecastHourly.append(windState)

                    var shortForecast = document.createElement('div')
                    shortForecast.textContent = result.properties.periods[arrNum].shortForecast
                    shortForecast.className = 'desc'
                    forecastHourly.append(shortForecast)

                    arrNum++
                }
                return current()
            }
            async function current() {
                response = await fetch(urlHourlyForecast)
                result = await response.json()
                arrLen = Object.keys(result.properties.periods).length
                arrNum = 0
                var currentTitle = document.getElementById('current-forecast')
                currentTitle.textContent = 'Current stats'
                var currentDesc = document.getElementById('currentdesc')
                currentDesc.textContent = 'What it\'s like outside right now'
                while (arrNum < arrLen) {
                    var currentTimeResult = result.properties.periods[arrNum].startTime.split('T', 1)
                    var currenttime = currentTimeResult[0].split(':', 1)
                    var currenttimeout = currenttime[0].split('-', 3)
                    if (currenttimeout[2] == dateUserDay) {
                        var userTime = result.properties.periods[arrNum].startTime.split('T', 2)
                        var usertime = userTime[1].split(':', 1)
                        if (hourUser == usertime[0]) {
                            console.log(arrNum)
                            currentArrNum = arrNum

                            var currentdata = document.getElementById('current')

                            var currenticon = document.createElement('img')
                            currenticon.src = result.properties.periods[currentArrNum].icon
                            currenticon.className = 'icon'
                            currentdata.append(currenticon)

                            var currentTimeofTemp = document.createElement('div')
                            var currentHourOfUser
                            if (hourUser >= 12) {
                                currentHourOfUser = (hourUser - 12) + ' PM'
                            }
                            else {
                                currentHourOfUser = hourUser + ' AM'
                            }
                            currentTimeofTemp.textContent = currentHourOfUser
                            currentTimeofTemp.className = 'name'
                            currentdata.append(currentTimeofTemp)

                            var currentTemp = document.createElement('div')
                            currentTemp.textContent = result.properties.periods[currentArrNum].temperature + '°'
                            currentTemp.className = 'temp'

                            currentdata.append(currentTemp)

                            var curwindState = document.createElement('div')
                            curwindState.textContent = 'Wind will be around ' + result.properties.periods[arrNum].windSpeed + ' heading ' + result.properties.periods[arrNum].windDirection
                            curwindState.className = 'wind'
                            currentdata.append(curwindState)

                            var currentdesc = document.createElement('div')
                            currentdesc.textContent = result.properties.periods[currentArrNum].shortForecast
                            currentdesc.className = 'desc'
                            currentdata.append(currentdesc)

                            var pageIcon = document.getElementById('icon')
                            var ico = document.createElement('link')
                            ico.href = result.properties.periods[currentArrNum].icon
                            ico.rel = 'icon'
                            pageIcon.append(ico)
                        }
                    }

                    arrNum++
                }
            }

            //GEOLOCATION ERRORS
            function locError(error) {
                var errBr = document.createElement('br')
                switch (error.code) {
                    case error.PERMISSION_DENIED:
                        errMsg = 'ERROR: PERMISSION FOR GEOLOCATION WAS DENIED BY USER'
                        err.append(errBr)
                        err.append(errMsg)
                        break;
                    case error.POSITION_UNAVAILABLE:
                        errmsg = 'ERROR: LOCATION UNAVAILABLE'
                        err.append(errBr)
                        err.append(errmsg)
                        break;
                    case error.TIMEOUT:
                        errmsg = 'ERROR: LOCATION TIMEOUT'
                        err.append(errBr)
                        err.append(errmsg)
                        break;
                    case error.UNKNOWN_ERROR:
                        errmsg = 'ERROR: UNKNOWN ERROR WHILE FETCHING LOCATION'
                        err.append(errBr)
                        err.append(errmsg)
                        break;
                }
                return askForCoords()
            }
            var goButton = ''
            var coordsOut = document.getElementById('geo-error-coords')
            var inputSub = ''
            function askForCoords() {
                var coordsTitle = document.createElement('h3')
                coordsTitle.textContent = 'There was an error with geolocation...'
                coordsTitle.style.padding = '5px'
                coordsTitle.style.margin = '10px'
                coordsOut.appendChild(coordsTitle)

                var coordsDesc = document.createElement('span')
                coordsDesc.textContent = 'Enter your own coordinates:'
                coordsDesc.style.padding = '5px'
                coordsDesc.style.margin = '10px'
                coordsOut.appendChild(coordsDesc)

                var coordsA = document.createElement('a')
                coordsA.href = 'https://www.google.com/search?q=what+are+the+coordinates+of+my+location'
                coordsA.textContent = 'What are my coordinates?'
                coordsA.target = '_blank'
                coordsA.style.padding = '5px'
                coordsA.style.margin = '10px'
                coordsOut.appendChild(coordsA)

                var coordsBr = document.createElement('br')
                coordsOut.appendChild(coordsBr)

                var inputLat = document.createElement('input')
                inputLat.value = '40.7128'
                inputLat.type = 'number'
                inputLat.name = 'coord'
                inputLat.id = 'coord-lat'
                inputLat.style.padding = '5px'
                inputLat.style.margin = '10px'
                coordsOut.appendChild(inputLat)

                var inputLon = document.createElement('input')
                inputLon.value = '-74.0060'
                inputLon.type = 'number'
                inputLon.name = 'coord'
                inputLon.id = 'coord-lon'
                inputLon.style.padding = '5px'
                inputLon.style.margin = '10px'
                coordsOut.appendChild(inputLon)

                inputSub = document.createElement('button')
                inputSub.textContent = 'Go'
                inputSub.style.padding = '5px'
                inputSub.style.margin = '10px'
                inputSub.id = 'input-error-go'
                inputSub.onclick = function sendCoords() {
                    locLat = document.getElementById('coord-lat').value
                    locLon = document.getElementById('coord-lon').value
                    console.log(locLat + ',' + locLon)
                    coordsOut.textContent = ''
                    return getStatus()
                }
                goButton = document.getElementById('input-error-go')
                coordsOut.appendChild(inputSub)
            }
        </script>
        <script>
            var cookies = document.cookie
            async function getActiveAlerts() {
                var stateUser = document.getElementById('statein').value
                var alertUrl = ''
                if (cookies.includes('rememberState=false')) {
                    alertUrl = 'https://api.weather.gov/alerts/active?area=' + stateUser
                }
                else {
                    var defStateCookie = document.cookie
                    if (defStateCookie.includes('defState')) {
                        var defStateCookie1 = defStateCookie.split('defState=')
                        defStateCookie2 = defStateCookie1[1].split(';', 1)
                        enterStateIn.value = defStateCookie2[0]
                    }
                    alertUrl = 'https://api.weather.gov/alerts/active?area=' + defStateCookie2
                }
                console.log('HEYOOOOO THIS IS THE ALERT URL!' + alertUrl)
                var alertName = document.createElement('div')
                var alertsOut = document.getElementById('alert')
                alertsOut.textContent = ''
                var arrNum = 0
                response = await fetch(alertUrl)
                result = await response.json()
                var arrLen = Object.keys(result.features).length
                var alertNum = document.createElement('div')
                alertNum.textContent = arrLen + ' active alerts'
                alertNum.className = 'name'
                var alertBr = document.createElement('hr')
                alertsOut.appendChild(alertNum)
                alertsOut.appendChild(alertBr)

                if (result.features != '') {
                    while (arrNum < arrLen) {
                        //ATTEMPT AT GETTING MORE SPECIFIC ALERTS
                        /*var coordsLen = Object.keys(result.features[arrNum].geometry.coordinates).length
                        var coordsArr = 0
                        while (coordsArr < coordsLen) {
                            if (result.features[arrNum].geometry.coordinates[coordsArr]) {
                                console.log(result.features[arrNum].geometry.coordinates[coordsArr])
                            }
                            coordsArr++
                        }*/
                        
                        var alertName = document.createElement('div')
                        alertName.textContent = result.features[arrNum].properties.headline
                        alertName.className = 'name'
                        alertsOut.append(alertName)

                        var alertSev = document.createElement('div')
                        alertSev.textContent = 'Severity: ' + result.features[arrNum].properties.severity
                        alertSev.className = 'sev'
                        alertsOut.append(alertSev)

                        var alertLike = document.createElement('div')
                        alertLike.textContent = 'Certainty: ' + result.features[arrNum].properties.certainty
                        alertLike.className = 'like'
                        alertsOut.append(alertLike)

                        var alertDesc = document.createElement('div')
                        alertDesc.textContent = result.features[arrNum].properties.description
                        alertDesc.className = 'desc'
                        alertsOut.append(alertDesc)

                        var alertInstruc = document.createElement('div')
                        if (result.features[arrNum].properties.instruction == null) {
                            alertInstruc.textContent = 'No instructions provided'
                        }
                        else {
                            alertInstruc.textContent = 'Instructions: ' + result.features[arrNum].properties.instruction
                        }
                        alertInstruc.className = 'instruc'
                        alertsOut.append(alertInstruc)

                        var hr = document.createElement('hr')
                        alertsOut.append(hr)

                        arrNum++
                    }
                }
                else {
                    var noAlert = document.createElement('div')
                    noAlert.textContent = 'No alerts for provided state!'
                    noAlert.className = 'noal'
                    alertsOut.append(noAlert)
                }
            }
        </script>
        <style class="emergency-css">
            .html {
                font-family: Arial, Helvetica, sans-serif;
            }
        </style>
    </body>
</html>